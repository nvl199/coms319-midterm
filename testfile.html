<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro Social Media UI</title>
    <style>
        /* ... (previous styles remain unchanged) ... */
        .json-button, .merge-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 10px;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <!-- ... (previous HTML structure remains unchanged) ... -->
    <div class="container">
        <div class="sidebar">
            <!-- ... (sidebar content remains unchanged) ... -->
        </div>
        <div class="main-content">
            <form id="postForm" class="post-form">
                <div class="post-content">
                    <input type="text" id="postTitle" placeholder="Title" required>
                    <textarea id="postBody" placeholder="Lorem ipsum or something" required></textarea>
                </div>
                <button type="submit" class="post-button">Post</button>
            </form>
            <button id="jsonButton" class="json-button">View JSON Data</button>
            <button id="mergeButton" class="merge-button">Merge and Sort Posts</button>
            <div id="postsContainer" class="posts-container"></div>
        </div>
    </div>

    <script>
        // In-memory array to store posts
        let posts = [];

        // Simulated JSON file 1
        const jsonFile1 = [
            { title: "Old Post 1", body: "Content 1", timestamp: "2023-05-01T10:00:00Z" },
            { title: "Old Post 2", body: "Content 2", timestamp: "2023-05-02T11:00:00Z" }
        ];

        // Simulated JSON file 2
        const jsonFile2 = [
            { title: "Old Post 3", body: "Content 3", timestamp: "2023-05-03T12:00:00Z" },
            { title: "Old Post 4", body: "Content 4", timestamp: "2023-05-04T13:00:00Z" }
        ];

        document.getElementById('postForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('postTitle').value;
            const body = document.getElementById('postBody').value;
            const timestamp = new Date().toISOString();
            
            const post = { title, body, timestamp };
            posts.unshift(post);
            
            displayPosts(posts);
            this.reset();
        });

        function displayPosts(postsToDisplay) {
            const postsContainer = document.getElementById('postsContainer');
            postsContainer.innerHTML = '';
            
            postsToDisplay.forEach(post => {
                const postElement = document.createElement('div');
                postElement.classList.add('post');
                postElement.innerHTML = `
                    <div class="post-title">${post.title}</div>
                    <div class="post-body">${post.body}</div>
                    <div class="post-time">${formatTime(new Date(post.timestamp))}</div>
                `;
                postsContainer.appendChild(postElement);
            });
        }

        function formatTime(date) {
            const hours = date.getHours().toString().padStart(2, '0');
            const minutes = date.getMinutes().toString().padStart(2, '0');
            return `${hours}:${minutes}`;
        }

        document.getElementById('jsonButton').addEventListener('click', function() {
            const jsonData = JSON.stringify(posts, null, 2);
            const newWindow = window.open();
            newWindow.document.write('<pre>' + jsonData + '</pre>');
        });

        document.getElementById('mergeButton').addEventListener('click', function() {
            const mergedPosts = mergeSortPosts(posts, jsonFile1, jsonFile2);
            displayPosts(mergedPosts);
        });

        function mergeSortPosts(...postArrays) {
            const allPosts = postArrays.flat();
            return allPosts.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        }
    </script>
</body>
</html>